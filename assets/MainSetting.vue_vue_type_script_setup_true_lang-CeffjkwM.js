import{d as _,u as j,a as v,f as D,e as i,g as o,b as g,co as b,cp as U,cq as T,cr as $,w as u,B,K as E,a8 as m,o as y,cs as V,t as k,ct as C,j as d,cu as O,cv as R}from"./index-B6aBKSif.js";import{_ as c}from"./SettingSelection.vue_vue_type_script_setup_true_lang-B9iuFRgR.js";import{u as J,_ as M}from"./ResetModal.vue_vue_type_script_setup_true_lang-Cdvsla7p.js";import{u as P}from"./render-C1MzH0AV.js";import{u as q}from"./site-CDzwRb4s.js";const z={key:0,px:"md:60 lg:120"},F={grid:"","grid-cols-2":"","gap-24":"","lg:grid-cols-2":"","md:grid-cols-2":""},G={"mt-24":"",flex:"","justify-center":"","gap-x-24":""},I={"my-24":"","flex-center":"","gap-x-24":""},Y=_({__name:"MainSetting",setup(K){const r=J(),s=j(),x=P();function N(n){const a=b.find(l=>l.enName===n.enName).value.buttonC,t=C.value?{style:{color:"#ffffff"}}:{};return d("div",{class:"flex items-center gap-x-8"},[d("div",{class:"w-16 h-16 circle border-1 border-fff",style:{backgroundColor:a}}),d("div",t,n.name)])}function f(n){const e=C.value?{style:{color:"#ffffff"}}:{};return d("div",{class:"flex items-center gap-x-8"},[d("div",e,n.name)])}const p=q();function w(){const n={data:p.data,settings:s.settings},e=JSON.stringify(n,null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),l=document.createElement("a");l.download=`Data_${new Date().toLocaleString()}.json`,l.href=t,document.body.appendChild(l),l.click(),URL.revokeObjectURL(t)}function L(){const n=document.createElement("input");n.type="file",n.accept=".json",n.addEventListener("change",async()=>{var a;const e=(a=n.files)==null?void 0:a[0];if(e)try{const t=await e.text(),l=JSON.parse(t);if(!l.data||!l.settings)throw new Error("非法的数据文件");S(l)}catch{window.$message.error("请导入合法的数据文件",{duration:2e3})}}),n.click()}function h(){r.title="重置确认",r.content="是否确认要重置所有设置?",r.resetVisible=!0,r.afterCommit=()=>{O.back()},r.finishCommit=()=>{const e=JSON.parse(JSON.stringify(R));S(e),window.$message.success("重置成功",{duration:2e3})}}function S(n){p.setData(n.data),s.setSettings(n.settings),V(n.settings.theme),k(),p.cateIndex=0,x.refreshSiteGroupList()}return(n,e)=>{const a=B;return y(),v(E,null,[o(s).isSetting?(y(),v("section",z,[g("div",F,[i(c,{modelValue:o(s).settings.theme,"onUpdate:modelValue":e[0]||(e[0]=t=>o(s).settings.theme=t),title:"主题风格",options:o(b),"render-label":N,"label-field":"name","value-field":"enName","on-update-value":t=>("toggleTheme"in n?n.toggleTheme:o(V))(t)},null,8,["modelValue","options","on-update-value"]),i(c,{modelValue:o(s).settings.search,"onUpdate:modelValue":e[1]||(e[1]=t=>o(s).settings.search=t),title:"搜索引擎",options:o(U),"render-label":f,"label-field":"name","value-field":"enName","on-update-value":t=>o(s).setSettings({search:t})},null,8,["modelValue","options","on-update-value"]),i(c,{modelValue:o(s).settings.iconStyle,"onUpdate:modelValue":e[2]||(e[2]=t=>o(s).settings.iconStyle=t),title:"图标风格",options:o(T),"render-label":f,"label-field":"name","value-field":"enName","on-update-value":t=>o(s).setSettings({iconStyle:t})},null,8,["modelValue","options","on-update-value"]),i(c,{modelValue:o(s).settings.siteStyle,"onUpdate:modelValue":e[3]||(e[3]=t=>o(s).settings.siteStyle=t),title:"色彩模式",options:o($),"render-label":f,"label-field":"name","value-field":"enName","on-update-value":t=>{o(s).setSettings({siteStyle:t}),o(k)()}},null,8,["modelValue","options","on-update-value"])]),g("div",G,[i(a,{onClick:h},{default:u(()=>[...e[5]||(e[5]=[m(" 重置数据 ",-1)])]),_:1}),i(a,{onClick:L},{default:u(()=>[...e[6]||(e[6]=[m(" 导入数据 ",-1)])]),_:1}),i(a,{onClick:w},{default:u(()=>[...e[7]||(e[7]=[m(" 导出数据 ",-1)])]),_:1})]),g("div",I,[i(a,{type:"primary","text-color":"#ffffff",size:"large",onClick:e[4]||(e[4]=t=>n.$router.back())},{default:u(()=>[...e[8]||(e[8]=[m(" 返回 ",-1)])]),_:1})])])):D("",!0),i(M)],64)}}});export{Y as _};
