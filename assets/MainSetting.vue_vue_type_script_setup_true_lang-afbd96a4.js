import{d as h,u as j,o as v,a as b,f as o,b as g,e as i,cm as y,cn as _,co as D,cp as E,cq as O,t as C,w as u,a4 as m,g as U,Y as T,cr as k,k as d,cs as $,ct as R,j as B}from"./index-efb1d334.js";import{_ as c}from"./SettingSelection.vue_vue_type_script_setup_true_lang-371c2e26.js";import{u as J,_ as M}from"./ResetModal.vue_vue_type_script_setup_true_lang-17477c1f.js";import{u as P}from"./render-d84ce1d8.js";import{u as q}from"./site-0366dc22.js";const z={key:0,px:"md:60 lg:120"},F={grid:"","grid-cols-2":"","gap-24":"","lg:grid-cols-2":"","md:grid-cols-2":""},G={"mt-24":"",flex:"","justify-center":"","gap-x-24":""},I={"my-24":"","flex-center":"","gap-x-24":""},X=h({__name:"MainSetting",setup(Y){const r=J(),s=j(),V=P();function x(n){const a=y.find(l=>l.enName===n.enName).value.buttonC,t=k.value?{style:{color:"#ffffff"}}:{};return d("div",{class:"flex items-center gap-x-8"},[d("div",{class:"w-16 h-16 circle border-1 border-fff",style:{backgroundColor:a}}),d("div",t,n.name)])}function f(n){const e=k.value?{style:{color:"#ffffff"}}:{};return d("div",{class:"flex items-center gap-x-8"},[d("div",e,n.name)])}const p=q();function N(){const n={data:p.data,settings:s.settings},e=JSON.stringify(n),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),l=document.createElement("a");l.download=`COMECOME_Data_${new Date().toLocaleString()}.json`,l.href=t,document.body.appendChild(l),l.click(),URL.revokeObjectURL(t)}function w(){const n=document.createElement("input");n.type="file",n.accept=".json",n.addEventListener("change",async()=>{var a;const e=(a=n.files)==null?void 0:a[0];if(e)try{const t=await e.text(),l=JSON.parse(t);if(!l.data||!l.settings)throw new Error("非法的数据文件");S(l)}catch{window.$message.error("请导入合法的数据文件",{duration:2e3})}}),n.click()}function L(){r.title="重置确认",r.content="是否确认要重置所有设置?",r.resetVisible=!0,r.afterCommit=()=>{$.back()},r.finishCommit=()=>{const e=JSON.parse(JSON.stringify(R));S(e),window.$message.success("重置成功",{duration:2e3})}}function S(n){p.setData(n.data),s.setSettings(n.settings),_(n.settings.theme),C(),p.cateIndex=0,V.refreshSiteGroupList()}return(n,e)=>{const a=B;return v(),b(T,null,[o(s).isSetting?(v(),b("section",z,[g("div",F,[i(c,{modelValue:o(s).settings.theme,"onUpdate:modelValue":e[0]||(e[0]=t=>o(s).settings.theme=t),title:"主题风格",options:o(y),"render-label":x,"label-field":"name","value-field":"enName","on-update-value":t=>("toggleTheme"in n?n.toggleTheme:o(_))(t)},null,8,["modelValue","options","on-update-value"]),i(c,{modelValue:o(s).settings.search,"onUpdate:modelValue":e[1]||(e[1]=t=>o(s).settings.search=t),title:"搜索引擎",options:o(D),"render-label":f,"label-field":"name","value-field":"enName","on-update-value":t=>o(s).setSettings({search:t})},null,8,["modelValue","options","on-update-value"]),i(c,{modelValue:o(s).settings.iconStyle,"onUpdate:modelValue":e[2]||(e[2]=t=>o(s).settings.iconStyle=t),title:"图标风格",options:o(E),"render-label":f,"label-field":"name","value-field":"enName","on-update-value":t=>o(s).setSettings({iconStyle:t})},null,8,["modelValue","options","on-update-value"]),i(c,{modelValue:o(s).settings.siteStyle,"onUpdate:modelValue":e[3]||(e[3]=t=>o(s).settings.siteStyle=t),title:"色彩模式",options:o(O),"render-label":f,"label-field":"name","value-field":"enName","on-update-value":t=>{o(s).setSettings({siteStyle:t}),o(C)()}},null,8,["modelValue","options","on-update-value"])]),g("div",G,[i(a,{onClick:L},{default:u(()=>e[5]||(e[5]=[m(" 重置数据 ",-1)])),_:1,__:[5]}),i(a,{onClick:w},{default:u(()=>e[6]||(e[6]=[m(" 导入数据 ",-1)])),_:1,__:[6]}),i(a,{onClick:N},{default:u(()=>e[7]||(e[7]=[m(" 导出数据 ",-1)])),_:1,__:[7]})]),g("div",I,[i(a,{type:"primary","text-color":"#ffffff",size:"large",onClick:e[4]||(e[4]=t=>n.$router.back())},{default:u(()=>e[8]||(e[8]=[m(" 返回 ",-1)])),_:1,__:[8]})])])):U("",!0),i(M)],64)}}});export{X as _};
