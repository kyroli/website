import{dl as O,r as n,dG as D,c as l,s as b}from"./index-2a2233ca.js";function j(){const t=localStorage.getItem("cache");return t?JSON.parse(t):void 0}const N=O("site",()=>{const t=n(j()||D.data),a=n(0),u=n(0),s=n(0),c=e=>a.value=e,i=e=>u.value=e,r=e=>s.value=e,v=l(()=>t.value.map(e=>({id:e.id,name:e.name}))),p=l(()=>t.value[a.value]||{groupList:[]});function o(e){return e==null?"":(e.match(/^(http:\/\/|https:\/\/).*/)||(e="https://"+e),e)}function d(e){e.url=o(e==null?void 0:e.url),t.value[a.value].groupList[u.value].siteList.push(e)}function f(e){t.value[a.value].groupList.push(e)}function g(e){t.value.push(e)}function h(e){e.url=o(e.url),Object.assign(t.value[a.value].groupList[u.value].siteList[s.value],e)}function L(e){Object.assign(t.value[a.value].groupList[u.value],e)}function S(e){Object.assign(t.value[a.value],e)}function m(){t.value[a.value].groupList[u.value].siteList.splice(s.value,1)}function I(){t.value[a.value].groupList.splice(u.value,1)}function x(){t.value.splice(a.value,1)}function C(){localStorage.setItem("cache",JSON.stringify(t.value))}function G(e){t.value=e}return b(t,()=>{C()},{deep:!0}),{data:t,cateIndex:a,cateList:v,currentCateData:p,setCateIndex:c,setGroupIndex:i,setSiteIndex:r,addSite:d,addGroup:f,addCate:g,updateSite:h,updateGroup:L,updateCate:S,deleteSite:m,deleteGroup:I,deleteCate:x,setData:G}});export{N as u};
